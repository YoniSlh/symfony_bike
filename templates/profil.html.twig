{% extends 'base.html.twig' %}

{% block content %}
	{% include '_header.html.twig' %}
	<main class="profilContainer">
		<div class="container">
			<h2>Mon profil</h2>
			<div class="profilDetails">
				<p>
					<strong>Prénom :</strong>
					{{ app.user.firstName }}
				</p>
				<p>
					<strong>Nom :</strong>
					{{ app.user.lastName }}
				</p>
				<p>
					<strong>Email :</strong>
					{{ app.user.email }}
				</p>
				<p>
					<strong>ID du compte :</strong>
					{{ app.user.id }}
				</p>
				<p>
					<strong>Rôles :</strong>
					{% if 'ROLE_ADMIN' in app.user.roles %}
						Administrateur
					{% elseif 'ROLE_USER' in app.user.roles %}
						Utilisateur
					{% else %}
						{{ app.user.roles|join(', ') }}
					{% endif %}
				</p>
			</div>
			<div class="creditCardSection">
				<h3>Mes cartes bancaires</h3>
				<ul class="creditCardList">
					{% for card in creditCards %}
						<li>
							<span>Carte se terminant par : ****
								{{ card.number|slice(-4) }}</span>
							<span>Expire le :
								{{ card.expirationDate|date('m/Y') }}</span>
							<a href="{{ path('user_profil_editCreditCard', {id: card.id}) }}" class="btnModifier">Modifier</a>
							<a href="{{ path('user_profil_deleteCreditCard', {id: card.id}) }}" class="btnDelete" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette carte ?');">Supprimer</a>
						</li>
					{% else %}
						<li>Aucune carte bancaire enregistrée.</li>
					{% endfor %}
				</ul>
				<a href="{{ path('user_profil_addCreditCard') }}" class="btnAjouter">Ajouter une carte bancaire</a>
			</div>
		</div>
	</main>
{% endblock %}
